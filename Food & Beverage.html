<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTR | Food & Beverage</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <nav>
            <ul>
                <div id="logo">UTR</div>
                <li><a href="home.html">Home</a></li>
                <li><a href="locations.html">Locations</a></li>
                <li><a href="Food & Beverage.html">Food & Beverage</a></li>
                <li><a href="Gas & Go.html">Gas & Go</a></li>
                <li><a href="LogIn.html" id="login-link">Account</a></li>
                <li><a href="Achievement.html">Achievement</a></li>
                <a href="LogIn.html" id="cart-link">
                    <img src="images/cart.png" alt="Image of a cart" id="cart-icon" />
                </a>
            </ul>
        </nav>
    </header>

    <main>
        <section id="menu">
            <h1>Food & Beverage</h1>

            <!-- Order Options with Buttons -->
            <div id="order-options" style="margin-bottom: 20px;">
                <button id="delivery" onclick="toggleMode('delivery')">Delivery</button>
                <button id="pickup" onclick="toggleMode('pickup')">Pickup</button>
            </div>

            <!-- Login Prompt -->
            <p id="login-prompt" style="margin-bottom: 20px;">
                <a href="LogIn.html">Log in</a> now to start shopping for food and beverage.
            </p>

            <!-- Pickup Locations -->
            <div id="pickup-locations" style="display:none;">
                <h2>Pickup Locations</h2>
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3151.835434509617!2d144.9630579153182!3d-37.816279579751934!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6ad65d43df29d3df%3A0x9b65b1b5d8aa8c7a!2sMelbourne%20VIC%2C%20Australia!5e0!3m2!1sen!2sin!4v1601583367390!5m2!1sen!2sin"
                    width="600" height="450" style="border:0;" allowfullscreen="" aria-hidden="false"
                    tabindex="0"></iframe>
            </div>

            <!-- Menu Container -->
            <div style="display: flex; justify-content: space-between;">

                <!-- Food Section -->
                <div class="menu-category" style="flex: 1; margin-right: 10px;">
                    <h2>All Day Menu</h2>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/sandwich.png" alt="Sandwich">
                        </div>
                        <div class="item-info">
                            <p>Sandwich</p>
                            <p>Price: $6.00</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Sandwich" data-price="6.00">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/salad.png" alt="Salad">
                        </div>
                        <div class="item-info">
                            <p>Salad</p>
                            <p>Price: $7.00</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Salad" data-price="7.00">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/wrap.png" alt="Wrap">
                        </div>
                        <div class="item-info">
                            <p>Wrap</p>
                            <p>Price: $8.00</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Wrap" data-price="8.00">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/Burger.png" alt="Burger">
                        </div>
                        <div class="item-info">
                            <p>Burger</p>
                            <p>Price: $10.00</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Burger" data-price="10.00">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/pizza.png" alt="Pizza">
                        </div>
                        <div class="item-info">
                            <p>Pizza</p>
                            <p>Price: $12.00</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Pizza" data-price="12.00">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/sushi.png" alt="Sushi">
                        </div>
                        <div class="item-info">
                            <p>Sushi</p>
                            <p>Price: $13.00</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Sushi" data-price="13.00">Add to Cart</button>
                    </div>
                </div>

                <!-- Beverages Section -->
                <div class="menu-category">
                    <h2>Beverages</h2>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/SoftDrink.png" alt="Soda">
                        </div>
                        <div class="item-info">
                            <p>Soda</p>
                            <p>Price: $2.99</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Soda" data-price="2.99">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/Juice.png" alt="Juice">
                        </div>
                        <div class="item-info">
                            <p>Juice</p>
                            <p>Price: $3.50</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Juice" data-price="3.50">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/water.png" alt="Water">
                        </div>
                        <div class="item-info">
                            <p>Water</p>
                            <p>Price: $3.89</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Water" data-price="3.89">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/tea.png" alt="Tea">
                        </div>
                        <div class="item-info">
                            <p>Tea</p>
                            <p>Price: $4.15</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Tea" data-price="4.15">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/Coffee.png" alt="Coffee">
                        </div>
                        <div class="item-info">
                            <p>Coffee</p>
                            <p>Price: $4.50</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Coffee" data-price="4.50">Add to Cart</button>
                    </div>

                    <div class="menu-item">
                        <div class="item-img">
                            <img src="images/Smoothy.png" alt="Smoothy">
                        </div>
                        <div class="item-info">
                            <p>Smoothy</p>
                            <p>Price: $5.50</p>
                        </div>
                        <button class="add-to-cart-btn" data-name="Smoothy" data-price="5.50">Add to Cart</button>
                    </div>
                </div>
            </div>
        </section>
        <section id="fuel-skip" class="cust-menu">
            <h2> Fuel Only?</h2>
            <p>Skip the menu and proceed to Gas & Go.</p>
            <a href="Gas & Go.html"><button>Gas and Go</button></a>
        </section>
    </main>

    <footer>
        Â©Copyright UTR Pty Ltd, 2024. All rights reserved.
    </footer>

    <script>
        function toggleMode(mode) {
            if (mode === 'pickup') {
                document.getElementById('pickup-locations').style.display = 'block';
            } else {
                document.getElementById('pickup-locations').style.display = 'none';
            }

            // Store the user's selection in localStorage
            localStorage.setItem('orderMode', mode);
        }

        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        function addFoodOrDrinkToCart(itemName, itemPrice) {
            const item = {
                name: itemName,
                price: parseFloat(itemPrice).toFixed(2),
                quantity: 1
            };

            const existingItemIndex = cart.findIndex(cartItem => cartItem.name === itemName);

            if (existingItemIndex !== -1) {
                cart[existingItemIndex].quantity += 1;
            } else {
                cart.push(item);
            }

            localStorage.setItem('cart', JSON.stringify(cart));

            alert(itemName + " added to the cart.");
        }

        const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');

        addToCartButtons.forEach(button => {
            button.addEventListener('click', function () {
                const itemName = this.getAttribute('data-name');
                const itemPrice = this.getAttribute('data-price');
                addFoodOrDrinkToCart(itemName, itemPrice);
            });
        });

        let current_user_index = parseInt(localStorage.getItem('current_user_index') || -1);

        function checkLoginStatus() {
            if (current_user_index === -1) {
                document.getElementById("login-link").innerText = "Log In";
                document.getElementById("order-options").remove();
                document.getElementById("customise-menu").remove();
                document.getElementById("fuel-skip").remove();
                document.querySelectorAll(".add-to-cart-btn").forEach(button => button.remove());
                document.querySelectorAll(".customise-btn").forEach(button => button.remove());
            } else {
                document.getElementById("login-link").setAttribute("href", "account.html");
                document.getElementById("cart-link").setAttribute("href", "cart.html");
                document.getElementById("login-prompt").remove();
            }
        }

        window.onload = checkLoginStatus();
    </script>
</body>

</html>